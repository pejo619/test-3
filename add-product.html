<!DOCTYPE html>
<html>
<head>
  <title>Add Product</title>
  <style>
    body { font-family: sans-serif; padding: 2rem; }
    form { max-width: 600px; margin: auto; }
    input, textarea, button { width: 100%; margin: 1rem 0; padding: 0.5rem; }
    button { background: #333; color: white; border: none; }
  </style>
</head>
<body>
  <h2>Add New Product</h2>

  <form onsubmit="submitProduct(); return false;">
  <input type="text" id="name" placeholder="Product Name" required />
  <input type="number" id="price" placeholder="Base Price (RM)" required />
  <input type="text" id="image" placeholder="Image URL" required />
  <textarea id="description" placeholder="Description"></textarea>
  <input type="text" id="color" placeholder="Color options (comma separated)" />
  <button type="submit">Submit</button>
</form>

<script>
  async function submitProduct() {
    const product = {
      name: document.getElementById("name").value,
      price: parseFloat(document.getElementById("price").value),
      image: document.getElementById("image").value,
      description: document.getElementById("description").value,
      color: document.getElementById("color").value.split(",").map(c => c.trim())
    };

    const issueTitle = `New Product: ${product.name}`;
    const issueBody = JSON.stringify(product, null, 2);

    const response = await fetch('https://api.github.com/repos/pejo619/test-3/issues', {
      method: 'POST',
      headers: {
        'Authorization': 'token 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',
        'Accept': 'application/vnd.github.v3+json'
      },
      body: JSON.stringify({
        title: issueTitle,
        body: issueBody,
        labels: ['new-product']
      })
    });

    if (response.ok) {
      alert("Product submitted! It will appear after processing.");
    } else {
      alert("Failed to submit. Check GitHub settings.");
    }
  }
</script>
</body>
</html>
