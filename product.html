<!DOCTYPE html>
<html>
<head>
  <title>Cabinet Store - Products</title>
  <style>
    body { font-family: sans-serif; margin: 0; padding: 1rem; }
    nav { background: #333; color: white; padding: 1rem; display: flex; justify-content: space-between; }
    nav a { color: white; text-decoration: none; margin: 0 1rem; }

    input, select { margin: 1rem 0; padding: 0.5rem; width: 100%; max-width: 300px; }

    .product-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-top: 1rem; }
    .card { border: 1px solid #ccc; padding: 1rem; text-align: center; }
    .card img { max-width: 100%; height: auto; }
  </style>
</head>
<body>
  <nav>
    <div><strong>Cabinet Store</strong></div>
    <div>
      <a href="index.html">Home</a>
      <a href="product.html">Product</a>
      <a href="contact.html">Contact Us</a>
    </div>
  </nav>

  <input type="text" id="search" placeholder="Search product..." onkeyup="filterProducts()">
  <select id="sort" onchange="sortProducts()">
    <option value="">Sort By</option>
    <option value="asc">Price Low to High</option>
    <option value="desc">Price High to Low</option>
  </select>

  <div class="product-grid" id="productList"></div>

  <script>
    let products = [];

    async function fetchProducts() {
      const res = await fetch("https://yourusername.github.io/yourrepo/data/products.json");
      products = await res.json();
      renderProducts(products);
    }

    function renderProducts(data) {
      const list = document.getElementById("productList");
      list.innerHTML = data.map(p => `
        <div class="card">
          <img src="${p.image}" />
          <h3>${p.name}</h3>
          <p>RM ${p.price}</p>
          <a href="product-detail.html?product=${encodeURIComponent(p.name)}"><button>View</button></a>
        </div>
      `).join("");
    }

    function filterProducts() {
      const query = document.getElementById("search").value.toLowerCase();
      const filtered = products.filter(p => p.name.toLowerCase().includes(query));
      renderProducts(filtered);
    }

    function sortProducts() {
      const val = document.getElementById("sort").value;
      let sorted = [...products];
      if (val === "asc") sorted.sort((a, b) => a.price - b.price);
      if (val === "desc") sorted.sort((a, b) => b.price - a.price);
      renderProducts(sorted);
    }

    fetchProducts();
  </script>
</body>
</html>

